<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Arabic Grammar ‚Äî Hw Quran Academy</title>
    <script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-database.js"></script>
     <script src="https://www.gstatic.com/firebasejs/8.3.3/firebase-auth.js"></script>

  <link rel="shortcut icon" href="../images/logo.png" type="image/x-icon">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;700&family=Noto+Sans+Display:wght@400;700&display=swap" rel="stylesheet">
  <!-- font awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <!-- Internal CSS -->
  <style>
    /* animaton effect */
/* ----------------------------------------------
 * Generated by Animista on 2025-10-8 14:21:31
 * Licensed under FreeBSD License.
 * See http://animista.net/license for more info. 
 * w: http://animista.net, t: @cssanimista
 * ---------------------------------------------- */

@-webkit-keyframes slide-in-fwd-top{0%{-webkit-transform:translateZ(-1400px) translateY(-800px);transform:translateZ(-1400px) translateY(-800px);opacity:0}100%{-webkit-transform:translateZ(0) translateY(0);transform:translateZ(0) translateY(0);opacity:1}}@keyframes slide-in-fwd-top{0%{-webkit-transform:translateZ(-1400px) translateY(-800px);transform:translateZ(-1400px) translateY(-800px);opacity:0}100%{-webkit-transform:translateZ(0) translateY(0);transform:translateZ(0) translateY(0);opacity:1}}
body{-webkit-animation:slide-in-fwd-top .4s cubic-bezier(.25,.46,.45,.94) both;animation:slide-in-fwd-top .4s cubic-bezier(.25,.46,.45,.94) both}

    :root{
      --brand:#0d6efd;
      --muted:#6c757d;
      --bg:#f5f7fb;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: "Segoe UI", Tahoma, Arial, sans-serif;
      background:var(--bg);
      color:#222;
      line-height:1.6;
    }

    /* Top navbar */
    .topbar{
      background:var(--brand);
      color:white;
      padding:12px 18px;
      display:flex;
      align-items:center;
      gap:12px;
      position:sticky;
      top:0;
      z-index:999;
    }
    .brand{
      font-weight:700;
      font-size:18px;
      color:white;
      text-decoration:none;
    }
    .top-actions{margin-left:auto; display:flex; gap:10px; align-items:center;}
    .btn {padding:8px 12px; border-radius:6px; cursor:pointer; border:none;}
    .btn-ghost{background:transparent; color:white; border:1px solid rgba(255,255,255,0.18)}
    .btn-primary{background:white; color:var(--brand); font-weight:600;}

    /* Layout */
    .wrap{display:flex; min-height:calc(100vh - 56px);}
    .sidebar{
      width:280px;
      background:#fff;
      border-right:1px solid #e6e9ef;
      overflow:auto;
      padding:12px;
      position:sticky;
      top:56px;
      height:calc(100vh - 56px);
    }
    .sidebar .search{
      display:flex; gap:8px; margin-bottom:12px;
    }
    .sidebar input[type="search"]{
      flex:1; padding:8px 10px; border-radius:6px; border:1px solid #ddd;
    }
    .chap-link{
      display:block;
      padding:8px 10px;
      margin-bottom:6px;
      border-radius:6px;
      text-decoration:none;
      color:#333;
      border:1px solid transparent;
    }
    .chap-link:hover{background:#f4f6fb; border-color:#eef2ff}
    .chap-link.active{background:var(--brand); color:white; font-weight:700}

    /* Main content */
    .content{flex:1; padding:28px; max-width:1100px; margin:0 auto;}
    .topbar-info{display:flex; gap:12px; align-items:center; margin-bottom:18px; flex-wrap:wrap;}
    .lang-select{padding:8px 10px; border-radius:6px; border:1px solid #ddd}

    .chapter{
      background:white;
      border-radius:10px;
      padding:22px;
      margin-bottom:18px;
      box-shadow:0 6px 20px rgba(15,30,70,0.03);
    }
    .chapter h2{margin-top:0; color:var(--brand); font-size:20px;}
    .arabic-example{
      direction:rtl;
      font-family:"Noto Naskh Arabic","Scheherazade New",serif;
      font-size:1.6rem;
      background:#f1f6ff;
      border-radius:8px;
      padding:12px 16px;
      margin:12px 0;
      color:#0b3a84;
    }
    .definition{font-weight:700; margin:8px 0;}
    .explanation{white-space:pre-wrap; margin:10px 0; color:#333}
    .conj-table{width:100%; border-collapse:collapse; margin-top:10px}
    .conj-table th, .conj-table td{border:1px solid #e8eef8; padding:8px; text-align:center}
    .note{font-size:0.95rem; color:var(--muted); margin-top:8px}

    /* responsive */
    @media (max-width:900px){
      .wrap{flex-direction:column;}
      .sidebar{width:100%; height:auto; position:relative; border-right:none; border-bottom:1px solid #e6e9ef}
      .content{padding:16px;}
      .topbar{flex-wrap:wrap}
    }

    /* Smooth scroll offset */
    html {scroll-behavior:smooth;}
    @-webkit-keyframes slide-in-fwd-top{0%{-webkit-transform:translateZ(-1400px) translateY(-800px);transform:translateZ(-1400px) translateY(-800px);opacity:0}100%{-webkit-transform:translateZ(0) translateY(0);transform:translateZ(0) translateY(0);opacity:1}}@keyframes slide-in-fwd-top{0%{-webkit-transform:translateZ(-1400px) translateY(-800px);transform:translateZ(-1400px) translateY(-800px);opacity:0}100%{-webkit-transform:translateZ(0) translateY(0);transform:translateZ(0) translateY(0);opacity:1}}
body{-webkit-animation:slide-in-fwd-top .4s cubic-bezier(.25,.46,.45,.94) both;animation:slide-in-fwd-top .4s cubic-bezier(.25,.46,.45,.94) both}
/* üåê Navbar + Dropdown Styling */

/* Dropdown Container */
.dropdown {
  position: relative;
  display: inline-block;
  font-family: 'Segoe UI', Arial, sans-serif;
}

/* Dropdown Button */
.dropbtn {
  background: #24292e;
  color: #fff;
  padding: 10px 18px;
  border: none;
  cursor: pointer;
  font-size: 15px;
  border-radius: 6px;
  transition: background 0.3s ease;
  font-weight: 500;
}

.dropbtn:hover {
  background: #2f363d;
}

/* Dropdown Menu Box */
.dropdown-content {
  display: none;
  position: absolute;
  min-width: 220px;
  background: #fff;
  border: 1px solid #e1e4e8;
  border-radius: 8px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.15);
  opacity: 0;
  transform: translateY(12px);
  transition: opacity 0.3s ease, transform 0.3s ease;
  z-index: 100;
  overflow: hidden;
}

/* Dropdown Links */
.dropdown-content a {
  color: #24292e;
  padding: 12px 16px;
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 14px;
  text-decoration: none;
  font-weight: 500;
  transition: background 0.2s ease, padding-left 0.2s ease;
}

/* Optional Hover Effect */
.dropdown-content a:hover {
  background: #f6f8fa;
  padding-left: 22px;
}

/* Small Icons beside text */
.dropdown-content a .icon {
  font-size: 16px;
}

/* Divider inside dropdown */
.dropdown-content hr {
  border-top: 1px solid #e1e4e8;
}
.dropdown{
  z-index: 
  10000000000000000000;
}
/* Dropdown hover animation */
.dropdown:hover .dropdown-content {
  display: block;
  opacity: 1;
  animation: 1s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0s 1 normal both running slide-in-top;
  transition: opacity 2s ease, transform 2s ease;
  transform: translateY(0);
  z-index: 100;
}

/* Optional animation keyframes (if you want smooth slide) */
@keyframes slide-in-top {
  0% {
    transform: translateY(-10px);
    opacity: 0;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}
  </style>
</head>
<body>
          <!-- navbar -->
<nav class="navbar navbar-expand-lg bg-primary px-5">
  <div class="container-fluid">
    <img src="../images/logo.png" hight="50px" width="50px" style="border-radius: 50%; margin-right: 10px;" alt="">
    <a class="navbar-brand" href="#" style="font-weight: bold ;">Hwquranacademy</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
        <li style="list-style: none; margin-bottom: 10px; margin-right: 10px;" class="nav-item">
        <a class="mt-2 nav-link text-white" href="../index.html">Home</a>
      </li>
      <li style="list-style: none; margin-bottom: 10px; margin-right: 10px;" class="nav-item">
        <a class="mt-2 nav-link text-white" href="../duas/dua.html">ü§≤Dua (Prayer)</a>
      </li>
      <ul class="navbar-nav">
        <div class="dropdown mx-2">
          <button class="dropbtn my-2">Grammer & Translation</button>

          <div class="dropdown-content">
            <a href="tarjuma.html"> Translation</a>
          </div>
        </div>
        <div class="dropdown mx-2">
          <button class="dropbtn my-2">Pages</button>
          <div class="dropdown-content">
            <a href="../main pages/html/contact.html">Contact</a>
            <a href="../main pages/html/about.html"> About</a>
          </div>
        </div>
        <div class="dropdown mx-2">
          <button class="dropbtn my-2">Learning</button>
          <div class="dropdown-content">
            <a href="../login/html/t.html" class="mt-2 mx-2"><i class="icon">üë®‚Äçüè´</i> Teacher</a>
            <a href="../login/html/s.html" class="mt-2 mx-2"><i class="icon">üë§</i> Student</a>
            <a href="../stories/main.html" class="mt-2 mx-2"><i class="icon">üìö</i> Prophet Stories</a>
          </div>
        </div>
        <div class="dropdown mx-2">
          <button class="dropbtn my-2">Allah & Prophet SAW names</button>

          <div class="dropdown-content">
            <a href="../allah and saw name/allah name.html
              ">Allah names</a>
            <a href="../allah and saw name/saw.html">Prophet SAW names</a>
          </div>
        </div>
        <li class="nav-item" id="login">
          <a class="mt-2 nav-link text-white" href="../mlogin.html"><i class="icon">üîë</i> Login</a>
        </li>


      </ul>
    </div>
  </div>
</nav>
  <!-- Topbar -->
  <div class="topbar">
    <a class="brand" href="#">Hwquranacademy ‚Äî Arabic Grammar</a>
    <div class="top-actions">
      <label for="langSelect" style="color:white; font-weight:600; margin-right:6px;">Your Language:</label>
      <select id="langSelect" class="lang-select" aria-label="Select language">
        <option value="en">English</option>
        <option value="ur">ÿßÿ±ÿØŸà (Urdu)</option>
        <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
        <option value="jp">Êó•Êú¨Ë™û (Japanese)</option>
        <option value="fr">Fran√ßais</option>
      </select>
      <a href="quiz.html" class="btn btn-ghost" style="color:white; text-decoration:none;">Take Quiz</a>
    </div>
  </div>

  <!-- Layout -->
  <div class="wrap" id="appWrap">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="search">
        <input type="search" id="searchInput" style="margin-top: 20px;" placeholder="Search chapter..." />
      </div>
      <div id="chapLinksContainer"></div>
      <div style="margin-top:12px; font-size:0.9rem; color:var(--muted)">
        <div>Tip: Click any chapter to scroll. Use language selector above to switch definitions.</div>
      </div>
    </aside>

    <!-- Main content -->
    <main class="content" id="mainContent">
      <div class="topbar-info">
        <div>
          <h1 style="margin:0; color:var(--brand)">Arabic Grammar ‚Äî Complete Course</h1>
          <div class="note">60 detailed chapters ‚Äî each contains Arabic examples, definitions, conjugation and explanations.</div>
        </div>
      </div>

      <div id="chaptersContainer"></div>
    </main>
  </div>
  <footer style="margin-top: 200px; background-color:#0d0d0d; color:#fff; font-family:'Segoe UI',Arial,sans-serif; padding:60px 20px 20px; border-top:3px solid #0d6efd; box-shadow:0 -3px 15px rgba(0,0,0,0.3);">
  <div class="container" style="max-width:1200px; margin:0 auto;">
    <div class="row" style="display:flex; flex-wrap:wrap; justify-content:space-between; gap:30px;">

      <!-- Logo & About -->
      <div style="flex:1 1 250px; min-width:220px;">
        <h2 style="font-weight:700; color:#0d6efd;">Hw Quran Academy</h2>
        <p style="color:#aaa; line-height:1.8; margin-top:15px;">
          A global online platform to learn <strong>Quran, Arabic Grammar</strong>, and Islamic knowledge with 
          qualified teachers. Empowering students with understanding of the Holy Quran.
        </p>
        <p style="margin-top:10px;">üìç Online Global Platform</p>
      </div>

      <!-- Quick Links -->
      <div style="flex:1 1 180px; min-width:160px;">
        <h4 style="font-weight:600; margin-bottom:15px;">Quick Links</h4>
        <ul style="list-style:none; padding:0;">
          <li><a href="../main pages/html/index.html" style="color:#ccc; text-decoration:none; display:block; padding:6px 0; transition:color 0.3s;">üè† Home</a></li>
          <li><a href="../stories/main.html" style="color:#ccc; text-decoration:none; display:block; padding:6px 0; transition:color 0.3s;">üìñ Prophet Stories</a></li>
          <li><a href="tarjuma.html" style="color:#ccc; text-decoration:none; display:block; padding:6px 0; transition:color 0.3s;">üìú Quran Translation</a></li>
          <li><a href="../main pages/html/contact.html" style="color:#ccc; text-decoration:none; display:block; padding:6px 0; transition:color 0.3s;">üìû Contact</a></li>
        </ul>
      </div>

      <!-- Contact -->
      <div style="flex:1 1 200px; min-width:180px;">
        <h4 style="font-weight:600; margin-bottom:15px;">Contact</h4>
        <p style="margin:8px 0;">‚úâÔ∏è info@hwquranacademy.com</p>
        <p style="margin:8px 0;">üåê https://hwquranacademy.netlify.app/</p>
      </div>

      
    <!-- Divider -->
    <hr style="border-color:rgba(255,255,255,0.1); margin:30px 0;">

    <!-- Bottom Footer -->
    <div style="text-align:center; color:#777; font-size:14px;">
      ¬© 2025 <strong>Hw Quran Academy</strong> ‚Äî All Rights Reserved | Designed with ‚ù§Ô∏è for Islamic Education
    </div>
  </div>
</footer>
<!-- font awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <!-- Internal JS -->
  <script>
  (function(){
    // --- Data setup (60 chapters) ---
    // Small pool of Arabic verbs and nouns with correct simple forms for examples
    const verbs = [
      {root:'ŸÉÿ™ÿ®', past:'ŸÉŸéÿ™Ÿéÿ®Ÿé', pres:'ŸäŸéŸÉŸíÿ™Ÿèÿ®Ÿè', noun:'ŸÉŸêÿ™Ÿéÿßÿ®Ÿå'},
      {root:'ŸÇÿ±ÿ£', past:'ŸÇŸéÿ±Ÿéÿ£Ÿé', pres:'ŸäŸéŸÇŸíÿ±Ÿéÿ£Ÿè', noun:'ŸÇŸêÿ±Ÿéÿßÿ°Ÿéÿ©Ÿå'},
      {root:'ÿØÿ±ÿ≥', past:'ÿØŸéÿ±Ÿéÿ≥Ÿé', pres:'ŸäŸéÿØŸíÿ±Ÿèÿ≥Ÿè', noun:'ÿØŸéÿ±Ÿíÿ≥Ÿå'},
      {root:'ÿ∞Ÿáÿ®', past:'ÿ∞ŸéŸáŸéÿ®Ÿé', pres:'ŸäŸéÿ∞ŸíŸáŸéÿ®Ÿè', noun:'ÿ∞ŸéŸáŸéÿßÿ®Ÿå'},
      {root:'ÿ£ŸÉŸÑ', past:'ÿ£ŸéŸÉŸéŸÑŸé', pres:'ŸäŸéÿ£ŸíŸÉŸèŸÑŸè', noun:'ÿ∑ŸéÿπŸéÿßŸÖŸå'},
      {root:'ÿ¥ÿ±ÿ®', past:'ÿ¥Ÿéÿ±Ÿêÿ®Ÿé', pres:'ŸäŸéÿ¥Ÿíÿ±Ÿéÿ®Ÿè', noun:'ÿ¥Ÿéÿ±Ÿéÿßÿ®Ÿå'},
      {root:'ÿπŸÑŸÖ', past:'ÿπŸéŸÑŸêŸÖŸé', pres:'ŸäŸéÿπŸíŸÑŸéŸÖŸè', noun:'ÿπŸêŸÑŸíŸÖŸå'},
      {root:'ÿπŸÖŸÑ', past:'ÿπŸéŸÖŸêŸÑŸé', pres:'ŸäŸéÿπŸíŸÖŸéŸÑŸè', noun:'ÿπŸéŸÖŸéŸÑŸå'},
      {root:'ÿ≥ŸÉŸÜ', past:'ÿ≥ŸéŸÉŸéŸÜŸé', pres:'ŸäŸéÿ≥ŸíŸÉŸèŸÜŸè', noun:'ŸÖŸéÿ≥ŸíŸÉŸéŸÜŸå'},
      {root:'ÿ≥ŸÖÿπ', past:'ÿ≥ŸéŸÖŸêÿπŸé', pres:'ŸäŸéÿ≥ŸíŸÖŸéÿπŸè', noun:'ÿ≥ŸéŸÖŸíÿπŸå'}
    ];

    // chapter focus types (tie quiz questions to them)
    const focuses = ['Verb','Noun','Particle','Morphology','Syntax','Derivation'];

    // helper templates for languages
    const langTemplates = {
      en: {
        defIntro: chapterNum => `Chapter ${chapterNum} explains an important Arabic grammar topic in depth.`,
        explanationIntro: "Explanation:",
        conjugationTitle: "Conjugation (example verb)"
      },
      ur: {
        defIntro: chapterNum => `ÿ®ÿßÿ® ${chapterNum} ÿπÿ±ÿ®€å ŸÜÿ≠Ÿà ⁄©ÿß ÿß€å⁄© ÿß€ÅŸÖ ŸÖŸàÿ∂Ÿàÿπ ÿ™ŸÅÿµ€åŸÑ ÿ≥€í ÿ®€åÿßŸÜ ⁄©ÿ±ÿ™ÿß €Å€í€î`,
        explanationIntro: "Ÿàÿ∂ÿßÿ≠ÿ™:",
        conjugationTitle: "⁄Øÿ±ÿØÿßŸÜ (ŸÖÿ´ÿßŸÑ€å ŸÅÿπŸÑ)"
      },
      hi: {
        defIntro: chapterNum => `‡§Ö‡§ß‡•ç‡§Ø‡§æ‡§Ø ${chapterNum} ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§Ö‡§∞‡§¨‡•Ä ‡§µ‡•ç‡§Ø‡§æ‡§ï‡§∞‡§£ ‡§µ‡§ø‡§∑‡§Ø ‡§ï‡§æ ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§µ‡§∞‡•ç‡§£‡§® ‡§π‡•à‡•§`,
        explanationIntro: "‡§µ‡•ç‡§Ø‡§æ‡§ñ‡•ç‡§Ø‡§æ:",
        conjugationTitle: "‡§µ‡§∞‡•ç‡§§‡§®‡•Ä (‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ)"
      },
      jp: {
        defIntro: chapterNum => `Á¨¨${chapterNum}Á´†„Åß„ÅØ„ÄÅÈáçË¶Å„Å™„Ç¢„É©„Éì„Ç¢Ë™ûÊñáÊ≥ï„ÅÆ„Éà„Éî„ÉÉ„ÇØ„Å´„Å§„ÅÑ„Å¶Ë©≥Ëø∞„Åó„Åæ„Åô„ÄÇ`,
        explanationIntro: "Ë™¨Êòé:",
        conjugationTitle: "Ê¥ªÁî®Ôºà‰æã„ÅÆÂãïË©ûÔºâ"
      },
      fr: {
        defIntro: chapterNum => `Chapitre ${chapterNum} explique en d√©tail un sujet important de la grammaire arabe.`,
        explanationIntro: "Explication:",
        conjugationTitle: "Conjugaison (verbe exemple)"
      }
    };

    // generate 60 chapters with rich content
    const chapters = Array.from({length:60}, (_, i) => {
      const idx = i;
      const v = verbs[i % verbs.length];
      const focus = focuses[i % focuses.length];
      // Build few Arabic examples: a short sentence, a nominal phrase, and a qur'anic-style phrase (not actual aya)
      const arabicExamples = [
        `${v.past} ÿßŸÑÿ∑ÿßŸÑÿ®Ÿè ÿßŸÑÿØŸëŸéÿ±ÿ≥Ÿé`,              // e.g., ŸÉŸéÿ™Ÿéÿ®Ÿé ÿßŸÑÿ∑ÿßŸÑÿ®Ÿè ÿßŸÑÿØŸëŸéÿ±ÿ≥Ÿé
        `ŸáŸ∞ÿ∞ÿß ${v.noun} ŸÖŸÅŸäÿØ`,                  // e.g., Ÿáÿ∞ÿß ŸÉÿ™ÿßÿ® ŸÖŸÅŸäÿØ
        `ÿßŸÑŸíÿπŸêŸÑŸíŸÖŸè ŸÜŸèŸàÿ±Ÿå`                       // common phrase
      ];
      // Return chapter object
      return {
        id: `chap-${i+1}`,
        number: i+1,
        title: `Chapter ${i+1}: ${focus} & Structure`,
        focus,
        verb: v,
        arabicExamples,
        // Provide definition/explanation/conjugation placeholders (populated by render with language)
        definitions: {
          en: `Detailed study of ${focus} in Arabic language with examples, usage and Quranic applications.`,
          ur: `ÿπÿ±ÿ®€å ÿ≤ÿ®ÿßŸÜ ŸÖ€å⁄∫ ${focus} ⁄©ÿß ŸÖŸÅÿµŸÑ ŸÖÿ∑ÿßŸÑÿπ€Åÿå ŸÖÿ´ÿßŸÑ€å⁄∫ÿå ÿßÿ≥ÿ™ÿπŸÖÿßŸÑ ÿßŸàÿ± ŸÇÿ±ÿ¢ŸÜ€å ÿßÿ∑ŸÑÿßŸÇÿßÿ™ ⁄©€í ÿ≥ÿßÿ™⁄æ€î`,
          hi: `‡§Ö‡§∞‡§¨‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§Æ‡•á‡§Ç ${focus} ‡§ï‡§æ ‡§µ‡§ø‡§∏‡•ç‡§§‡•É‡§§ ‡§Ö‡§ß‡•ç‡§Ø‡§Ø‡§®, ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§î‡§∞ ‡§â‡§™‡§Ø‡•ã‡§ó‡•§`,
          jp: `„Ç¢„É©„Éì„Ç¢Ë™û„Å´„Åä„Åë„Çã${focus}„ÅÆË©≥Á¥∞„Å™Á†îÁ©∂„ÄÅ‰æã„Å®Áî®Ê≥ï„ÄÇ`,
          fr: `√âtude d√©taill√©e de ${focus} en arabe avec des exemples et usages.`
        },
        explanation: {
          en: `In this chapter we discuss ${focus.toLowerCase()} patterns, common errors, and many worked examples. The chapter includes analysis of sentence structure, roles of words, agreement, and exceptions. Practice examples are given with detailed steps.`,
          ur: `ÿßÿ≥ ÿ®ÿßÿ® ŸÖ€å⁄∫ ${focus.toLowerCase()} ⁄©€í Ÿæ€åŸπÿ±ŸÜÿå ÿπÿßŸÖ ÿ∫ŸÑÿ∑€åÿß⁄∫ ÿßŸàÿ± ŸÖÿ™ÿπÿØÿØ ÿπŸÖŸÑ€å ŸÖÿ´ÿßŸÑ€å⁄∫ ÿ¥ÿßŸÖŸÑ €Å€å⁄∫€î ÿ®ÿßÿ® ŸÖ€å⁄∫ ÿ¨ŸÖŸÑ€í ⁄©€å ÿ≥ÿßÿÆÿ™ÿå ÿßŸÑŸÅÿßÿ∏ ⁄©€í ⁄©ÿ±ÿØÿßÿ±ÿå ŸÖŸàÿßŸÅŸÇÿ™ ÿßŸàÿ± ÿßÿ≥ÿ™ÿ´ŸÜÿßÿ° ⁄©€å ÿ™ŸÅÿµ€åŸÑ €Å€í€î`,
          hi: `‡§á‡§∏ ‡§Ö‡§ß‡•ç‡§Ø‡§æ‡§Ø ‡§Æ‡•á‡§Ç ${focus.toLowerCase()} ‡§ï‡•á ‡§™‡•à‡§ü‡§∞‡•ç‡§®, ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡§Ø‡§æ‡§Å ‡§î‡§∞ ‡§ï‡§à ‡§â‡§¶‡§æ‡§π‡§∞‡§£ ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•à‡§Ç‡•§`,
          jp: `„Åì„ÅÆÁ´†„Åß„ÅØ${focus.toLowerCase()}„ÅÆ„Éë„Çø„Éº„É≥„ÄÅ‰∏ÄËà¨ÁöÑ„Å™Ë™§„Çä„ÄÅ‰æãÈ°å„ÇíÊâ±„ÅÑ„Åæ„Åô„ÄÇ`,
          fr: `Dans ce chapitre, nous √©tudions les mod√®les de ${focus.toLowerCase()}, erreurs communes et de nombreux exemples pratiques.`
        },
        conjugationNote: {
          en: `Example conjugation for the verb "${v.root}" (past / present):`,
          ur: `ŸÅÿπŸÑ "${v.root}" ⁄©€å ⁄Øÿ±ÿØÿßŸÜ (ŸÖÿßÿ∂€å / ŸÖÿ∂ÿßÿ±ÿπ) ŸÖÿ´ÿßŸÑ ⁄©€í ÿ∑Ÿàÿ± Ÿæÿ±:`,
          hi: `‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ "${v.root}" ‡§ï‡•á ‡§≤‡§ø‡§è ‡§µ‡§ö‡§® (‡§≠‡•Ç‡§§‡§ï‡§æ‡§≤ / ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§®):`,
          jp: `"${v.root}" „ÅÆÊ¥ªÁî®‰æãÔºàÈÅéÂéª / ÁèæÂú®ÔºâÔºö`,
          fr: `Conjugaison pour le verbe "${v.root}" (pass√© / pr√©sent) :`
        }
      };
    });

    // --- DOM elements ---
    const sidebar = document.getElementById('chapLinksContainer');
    const chaptersContainer = document.getElementById('chaptersContainer');
    const langSelect = document.getElementById('langSelect');
    const searchInput = document.getElementById('searchInput');
    const collapseBtn = document.getElementById('collapseBtn');

    // render sidebar and chapters for a given language
    function renderAll(lang='en'){
      // save selected language to localStorage for quiz page
      try { localStorage.setItem('hwq_lang', lang); } catch(e){/*ignore*/}
      // Sidebar links
      sidebar.innerHTML = chapters.map(ch => `
        <a class="chap-link" href="#${ch.id}" data-id="${ch.id}">${ch.number}. ${ch.title}</a>
      `).join('');
      // Chapters main content
      chaptersContainer.innerHTML = chapters.map(ch => {
        // build arabic examples markup
        const arHtml = ch.arabicExamples.map(a=> `<div class="arabic-example">${a}</div>`).join('');
        // conjugation table : build rows for past/present (simple correct forms for sample verbs)
        const verb = ch.verb;
        // Past/person forms (common pattern)
        const pastRows = [
          {p:'ÿ£ŸÜÿß', f: verb.past + 'ÿ™Ÿè'}, // approximate
          {p:'ÿ£ŸÜÿ™Ÿé', f: verb.past + 'ÿ™Ÿé'},
          {p:'ÿ£ŸÜÿ™Ÿê', f: verb.past + 'ÿ™Ÿê'},
          {p:'ŸáŸà', f: verb.past},
          {p:'ŸáŸä', f: verb.past + 'ÿ™Ÿí'},
          {p:'ŸÜÿ≠ŸÜ', f: verb.past + 'ŸÜŸéÿß'},
          {p:'ÿ£ŸÜÿ™ŸÖ', f: verb.past + 'ÿ™ŸèŸÖŸí'},
          {p:'ŸáŸÖ', f: verb.past + 'Ÿàÿß'}
        ];
        const presRows = [
          {p:'ÿ£ŸÜÿß', f: 'ÿ£' + verb.pres.slice(1)},
          {p:'ÿ£ŸÜÿ™Ÿé', f: 'ÿ™' + verb.pres.slice(1)},
          {p:'ÿ£ŸÜÿ™Ÿê', f: 'ÿ™' + verb.pres.slice(1) + 'ŸäŸÜ'},
          {p:'ŸáŸà', f: verb.pres},
          {p:'ŸáŸä', f: verb.pres + 'Ÿè (fem)'},
          {p:'ŸÜÿ≠ŸÜ', f: 'ŸÜ' + verb.pres.slice(1)},
          {p:'ÿ£ŸÜÿ™ŸÖ', f: 'ÿ™' + verb.pres.slice(1) + 'ŸàŸÜ'},
          {p:'ŸáŸÖ', f: verb.pres.slice(0,1) + verb.pres.slice(1) + 'ŸàŸÜ'}
        ];
        // Compose table rows html
        const pastHtml = pastRows.map(r=>`<tr><td>${r.p}</td><td>${r.f}</td></tr>`).join('');
        const presHtml = presRows.map(r=>`<tr><td>${r.p}</td><td>${r.f}</td></tr>`).join('');

        // language-specific texts
        const def = ch.definitions[lang] || ch.definitions['en'];
        const expl = ch.explanation[lang] || ch.explanation['en'];
        const conjNote = (langTemplates[lang] && langTemplates[lang].conjugationTitle) ? (langTemplates[lang].conjugationTitle) : 'Conjugation';
        const defIntro = (langTemplates[lang] && langTemplates[lang].defIntro) ? langTemplates[lang].defIntro(ch.number) : (`Chapter ${ch.number} details`);
        // Build long content with multiple paragraphs
        const longExplanation = `${expl}\n\n${expl} Additional examples and step-by-step morphological analysis are included. Practice by changing pronouns and observing vowel patterns. This chapter also includes exercises and sample parsing of sentences.`;

        return `
          <section id="${ch.id}" class="chapter">
            <h2>${ch.number}. ${ch.title}</h2>
            <div class="definition">${defIntro}</div>
            <div class="arabic-example" aria-hidden="true">${ch.arabicExamples[0]}</div>
            <div class="translation"><strong>Definition:</strong> ${def}</div>
            <div class="explanation"><strong>${langTemplates[lang]?.explanationIntro || 'Explanation:'}</strong><br>${longExplanation}</div>

            <h4 style="margin-top:12px">${conjNote}</h4>
            <div style="overflow:auto">
              <table class="conj-table" style="width:100%;">
                <thead><tr><th>Pronoun</th><th>Past</th></tr></thead>
                <tbody>${pastHtml}</tbody>
              </table>
            </div>

            <div style="overflow:auto; margin-top:8px">
              <table class="conj-table" style="width:100%;">
                <thead><tr><th>Pronoun</th><th>Present</th></tr></thead>
                <tbody>${presHtml}</tbody>
              </table>
            </div>

            <div class="note">Focus: <strong>${ch.focus}</strong> ‚Äî Examples above use verb root <strong>${ch.verb.root}</strong>. More exercises follow at the end of the chapter.</div>
          </section>
        `;
      }).join('');

      // after rendering, update chapter links active state
      setupActiveObserver();
      // save metadata for quiz page (store light data)
      const metaForQuiz = chapters.map(ch => ({number:ch.number, title:ch.title, focus:ch.focus}));
      try { localStorage.setItem('hwq_chapters_meta', JSON.stringify(metaForQuiz)); } catch(e){}
    }

    // initial render with saved language or default english
    const savedLang = (localStorage.getItem('hwq_lang')) || 'en';
    langSelect.value = savedLang;
    renderAll(savedLang);

    // language change handler
    langSelect.addEventListener('change', e => {
      renderAll(e.target.value);
      // scroll to top of content
      window.scrollTo({top:0, behavior:'smooth'});
    });

    // search filter in sidebar
    searchInput.addEventListener('input', function(){
      const q = this.value.trim().toLowerCase();
      document.querySelectorAll('.chap-link').forEach(a=>{
        const text = a.textContent.toLowerCase();
        a.style.display = text.includes(q) ? 'block' : 'none';
      });
    });

    // collapse sidebar (for small screens)
    collapseBtn.addEventListener('click', ()=>{
      const sb = document.querySelector('.sidebar');
      if(sb.style.display === 'none'){ sb.style.display='block'; } else { sb.style.display='none'; }
    });

    // highlight active chapter in sidebar using IntersectionObserver
    function setupActiveObserver(){
      // remove active classes
      document.querySelectorAll('.chap-link').forEach(a=>a.classList.remove('active'));
      const options = { root: null, rootMargin: '-20% 0px -50% 0px', threshold: 0 };
      const headings = Array.from(document.querySelectorAll('.chapter'));
      // disconnect previous observer if any
      if(window.chapterObserver) window.chapterObserver.disconnect();

      window.chapterObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if(entry.isIntersecting){
            const id = entry.target.id;
            document.querySelectorAll('.chap-link').forEach(a=>{
              a.classList.toggle('active', a.dataset.id === id);
            });
            // update URL hash without scrolling
            history.replaceState(null, '', '#'+id);
          }
        });
      }, options);

      headings.forEach(h => window.chapterObserver.observe(h));
    }

    // handle clicks on sidebar links to smooth scroll and keep mobile sidebar hidden
    document.getElementById('sidebar').addEventListener('click', (e)=>{
      const a = e.target.closest('.chap-link');
      if(!a) return;
      e.preventDefault();
      const id = a.getAttribute('href').replace('#','');
      const el = document.getElementById(id);
      if(el) el.scrollIntoView({behavior:'smooth', block:'start'});
      // if mobile hide sidebar
      if(window.innerWidth < 900) document.querySelector('.sidebar').style.display='none';
    });

    // initial observer setup (after small timeout to ensure DOM nodes present)
    setTimeout(()=> setupActiveObserver(), 300);

  })();
  </script>
  <script src="../auth.js"></script>
</body>
</html>
